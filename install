ROOT=$PWD
SAV=$HOME/dotfiles.sav
mkdir -p $SAV/bin $SAV/ssh $SAV/keys

cd $ROOT/dots
for f in *; do mv $HOME/.$f $SAV/$f; ln -s $PWD/$f $HOME/.$f; done

cd $ROOT/bin
X="$HOME/.local"
mkdir -p $X/bin
for f in *; do mv $X/bin/$f $SAV/bin/$f; ln -s $PWD/$f $X/bin/$f; done

cd $ROOT/vagrant
for f in Vagrantfile; do mv $X/$f $SAV/$f; ln -s $PWD/$f $X/$f; done

cd $ROOT/ssh
mkdir -p $HOME/.ssh && chmod go-rwx $HOME/.ssh
for f in *; do mv $HOME/.ssh/$f $SAV/ssh/$f; ln -s $PWD/$f $HOME/.ssh/$f; done

cd $HOME/src/keys
for f in *; do mv $HOME/.ssh/$f $SAV/keys/$f; ln -s $PWD/$f $HOME/.ssh/$f; done

mv $HOME/.fonts $SAV; ln -s $HOME/src/fonts $HOME/.fonts
